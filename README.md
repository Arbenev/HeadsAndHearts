# Heads And Hearts test

## Задача 1. Развернуть окружение

1. ```apk del --no-cache``` удалил ```--no-cache```.
К сожалению, никогда раньше не работал с этим дистрибутивом и этим менеджером пакетов, поэтому действовал почти наугад, не найдя этого параметра в описании команды ```apk del```.
2. Поправил название поля в
```
        $newsTable->addIndex(['status']);
```

## Задача 2. Исправить ошибки в ендпоинтах

1. В ```News\Handler\ListHandler``` добавил проверку на наличие полей ```page``` и ```limit``` в запросе.
2. В ```News\Handler\CreateHandler``` добавил возврат ID созданной новости.

## Задача 3.

1. Редактирование новости реализовано как
```
PUT /news/{id}
```
с POST-параметрами аналогично ```create```. Добавил метод ```News\Entity\News::updateThis(array $data)```, записывающий новые данные в объект (без записи в БД) и метод ```News\NewsService::update(UuidInterface $id, array $data): void```, записывающий измененный объект в базу.
2. Публикацию новости реализовал как 
```
PATCH /news/{id}
```
Добавил метод ```News\Entity\News::publishThis()```, помечающий объект как опубликованный (без записи в БД) и метод ```News\NewsService::publish(UuidInterface $id): void```, записывающий измененный объект в базу.
Добавил соответствующие методы в ```News\Contract\NewsServiceInterface```.

Добавил соответствующий код в ```News\Handler\UpdateHandler``` и создал новый ```News\Handler\PublishHandler``` для публикации.

Добавил новый путь в ```News\RoutesDelegator```

## P.S.

Улучшениями не очень занимался, поскольку не знаю фреймворка и его возможностей (увидел первый раз в жизни).

Могу, пожалуй, заметить, что метод News\NewsService::findAll() возвращает только опубликованные новости. Это правильно для фронта, но совершенно не годится для админки. В дальнейшем явно потребуется либо метод, возвращающий все записи, либо дополнительный параметр status в этом методе.
